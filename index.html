<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Cat Fortress 2</title>
<style>
  body { margin: 0; overflow: hidden; background: #a0d8f1; }
  canvas { display: block; background: #a0d8f1; }
</style>
</head>
<body>
<canvas id="game"></canvas>
<script>
// Canvas setup
const canvas = document.getElementById('game');
const ctx = canvas.getContext('2d');
canvas.width = 800;
canvas.height = 400;

// Images
const floorImg = new Image();
floorImg.src = 'floor.png'; // 512x127
const stairsImg = new Image();
stairsImg.src = 'stairs.png'; // 40x32

// Game objects
const floors = [];
const stairs = [];
const floorWidth = 120;
const floorHeight = 32;
const stairWidth = 40;
const stairHeight = 32;

// Create floor tiles
for(let i=0; i<canvas.width; i+=floorWidth){
    floors.push({x:i, y:canvas.height-floorHeight, w:floorWidth, h:floorHeight});
}

// Create stairs
let startX = 100; // starting x
let startY = canvas.height-floorHeight;
for(let i=0; i<5; i++){
    stairs.push({x:startX + i*35, y:startY - (i+1)*stairHeight, w:stairWidth, h:stairHeight});
}

// Player
const player = {
    x:50,
    y:canvas.height-floorHeight-20,
    w:20,
    h:20,
    vy:0,
    speed:2,
    jumping:false
};

// Keys
const keys = {};
document.addEventListener('keydown', e=>{keys[e.key]=true;});
document.addEventListener('keyup', e=>{keys[e.key]=false;});

// Collision helper
function rectCollision(r1, r2){
    return r1.x + r1.w > r2.x && r1.x < r2.x + r2.w &&
           r1.y + r1.h > r2.y && r1.y < r2.y + r2.h;
}

// Game loop
function update(){
    ctx.clearRect(0,0,canvas.width,canvas.height);
    
    // Draw floor
    floors.forEach(f=>{
        ctx.drawImage(floorImg, 0, 0, 512,127, f.x, f.y, f.w, f.h);
    });
    
    // Draw stairs
    stairs.forEach(s=>{
        ctx.drawImage(stairsImg, 0,0,40,32, s.x, s.y, s.w, s.h);
    });
    
    // Player physics
    if(keys[' ']){ // jump
        if(!player.jumping){
            player.vy = -6;
            player.jumping = true;
        }
    }
    player.vy += 0.3; // gravity
    player.y += player.vy;
    
    // Move left/right
    if(keys['a']) player.x -= player.speed;
    if(keys['d']) player.x += player.speed;
    
    // Floor collision
    let onGround = false;
    floors.forEach(f=>{
        if(rectCollision(player, f)){
            player.y = f.y - player.h;
            player.vy = 0;
            player.jumping = false;
            onGround = true;
        }
    });
    
    // Stairs collision
    stairs.forEach(s=>{
        if(!keys['Shift'] && rectCollision(player, s)){
            player.y = s.y - player.h;
            player.vy = 0;
            player.jumping = false;
        }
    });
    
    // Draw player
    ctx.font = "30px Arial";
    ctx.fillText("ðŸ±", player.x, player.y+player.h);
    
    requestAnimationFrame(update);
}

floorImg.onload = ()=>{stairsImg.onload = ()=>{update();}};
</script>
</body>
</html>