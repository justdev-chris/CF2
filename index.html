<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>CT2 Demo</title>
<style>
  canvas { background: #87ceeb; display: block; margin: auto; }
</style>
</head>
<body>
<canvas id="game" width="640" height="480"></canvas>
<script>
const canvas = document.getElementById('game');
const ctx = canvas.getContext('2d');

const gravity = 0.5;
const keys = {};

let player = {
  x: 50,
  y: 50,
  width: 32,
  height: 32,
  velocityX: 0,
  velocityY: 0,
  speed: 3,
  color: 'red'
};

// load your floor tile image
const floorImg = new Image();
floorImg.src = 'floor.png'; // make sure this PNG is in the same folder

// floor tiles (example: one row at bottom)
const tileSize = 32;
const tiles = [
  {x: 0, y: 400, width: 640, height: tileSize}
];

// controls
document.addEventListener('keydown', e => keys[e.code] = true);
document.addEventListener('keyup', e => keys[e.code] = false);

function update() {
  // movement
  player.velocityX = 0;
  if(keys['ArrowLeft']) player.velocityX = -player.speed;
  if(keys['ArrowRight']) player.velocityX = player.speed;

  // apply gravity
  player.velocityY += gravity;

  // move player
  player.x += player.velocityX;
  player.y += player.velocityY;

  // simple collision
  for(let tile of tiles) {
    if(
      player.x < tile.x + tile.width &&
      player.x + player.width > tile.x &&
      player.y < tile.y + tile.height &&
      player.y + player.height > tile.y
    ) {
      player.y = tile.y - player.height;
      player.velocityY = 0;
    }
  }

  // jump
  if(keys['Space']) {
    for(let tile of tiles) {
      if(player.y + player.height === tile.y) {
        player.velocityY = -10;
      }
    }
  }

  draw();
  requestAnimationFrame(update);
}

function draw() {
  ctx.clearRect(0, 0, canvas.width, canvas.height);

  // draw tiles with PNG
  for(let tile of tiles) {
    ctx.drawImage(floorImg, tile.x, tile.y, tile.width, tile.height);
  }

  // draw player
  ctx.fillStyle = player.color;
  ctx.fillRect(player.x, player.y, player.width, player.height);
}

// start game after image loads
floorImg.onload = () => update();
</script>
</body>
</html>