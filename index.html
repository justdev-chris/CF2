<!-- Cat Fortress 2 - lil catboy edition ðŸ¾ -->
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Cat Fortress 2</title>
<style>
  canvas {
    display: block;
    margin: 0 auto;
    background: #87ceeb; /* sky blue */
  }
</style>
</head>
<body>
<canvas id="gameCanvas" width="800" height="400"></canvas>

<script>
const canvas = document.getElementById('gameCanvas');
const ctx = canvas.getContext('2d');

const gravity = 0.5;
let keys = {};

// Images
const floorImg = new Image();
floorImg.src = 'floor.png'; // 512x127

const stairImg = new Image();
stairImg.src = 'stair.png'; // 40x32

floorImg.onload = () => {
    stairImg.onload = () => {
        init();
    }
};

function init() {
    const player = {
        x: 50,
        y: 0,
        w: 32,
        h: 32,
        dy: 0
    };

    // Floor tiles (scaled smaller)
    const floorHeight = 50; // scaled height
    const floorY = canvas.height - floorHeight;

    const floorTileWidth = floorImg.width * (floorHeight / floorImg.height);
    const floorCount = Math.ceil(canvas.width / floorTileWidth);

    // Stairs
    const stairWidth = 40;
    const stairHeight = 32;
    const stairs = [
        {x: 200, y: floorY - stairHeight},
        {x: 240, y: floorY - stairHeight*2},
        {x: 280, y: floorY - stairHeight*3}
    ];

    document.addEventListener('keydown', e => { keys[e.key] = true; });
    document.addEventListener('keyup', e => { keys[e.key] = false; });

    function gameLoop() {
        ctx.clearRect(0,0,canvas.width,canvas.height);

        // Draw floor
        for(let i=0;i<floorCount;i++){
            ctx.drawImage(floorImg, i*floorTileWidth, floorY, floorTileWidth, floorHeight);
        }

        // Draw stairs
        stairs.forEach(stair => {
            // shift to pass through
            if(!(keys.Shift && player.x + player.w > stair.x && player.x < stair.x + stairWidth && player.y + player.h > stair.y)) {
                ctx.drawImage(stairImg, stair.x, stair.y, stairWidth, stairHeight);
            }
        });

        // Player movement
        if(keys.ArrowLeft) player.x -= 3;
        if(keys.ArrowRight) player.x += 3;
        if(keys.ArrowUp && player.dy === 0) player.dy = -10;

        player.dy += gravity;
        player.y += player.dy;

        // Floor collision
        if(player.y + player.h > floorY) {
            player.y = floorY - player.h;
            player.dy = 0;
        }

        // Stairs collision
        stairs.forEach(stair => {
            if(!(keys.Shift) &&
                player.x + player.w > stair.x &&
                player.x < stair.x + stairWidth &&
                player.y + player.h > stair.y &&
                player.y + player.h < stair.y + stairHeight + player.dy) {
                    player.y = stair.y - player.h;
                    player.dy = 0;
            }
        });

        // Draw player
        ctx.font = "32px sans-serif";
        ctx.fillText("ðŸ±", player.x, player.y + player.h);

        requestAnimationFrame(gameLoop);
    }

    gameLoop();
}
</script>
</body>
</html>